/*! For licensing see /devsummit/LICENSE */
!function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b;return this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f=this._indexOfListener(a,d);if(-1!==f){if(a=this._bindings[f],a.isOnce()!==c)throw Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else a=new b(this,a,c,d,e),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var a,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c){a=this._bindings.slice(),this._shouldPropagate=!0;do c--;while(a[c]&&this._shouldPropagate&&a[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.signals=e}(this),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var CDS={};CDS.EventPublisher=function(){"use strict";function a(b){if(!e[b.type])throw"Unsupported event"+b.type;e[b.type].dispatch(b),e[b.type].getNumListeners()>0||f.removeEventListener(b.type,a)}function b(b,c){if(!e[b])throw"Unsupported event: "+b;e[b].add(c),e[b].getNumListeners()>1||f.addEventListener(b,a)}function c(b,c){if(!e[b])throw"Unsupported event: "+b;e[b].addOnce(c),e[b].getNumListeners()>1||f.addEventListener(b,a)}function d(){if(!e[eventName])throw"Unsupported event: "+eventName;e[eventName].remove(eventHandler),e[eventName].getNumListeners()>0||f.removeEventListener(eventName,a)}var e={resize:new signals.Signal,scroll:new signals.Signal,keyup:new signals.Signal,load:new signals.Signal},f=window;return{add:b,addOnce:c,remove:d}}(),CDS.Util=function(){"use strict";function a(a,b){for(var c={},d=0;d<a.length;d++)c[a[d]]=b;return c}function b(){return"undefined"==typeof window.scrollY?document.documentElement.scrollTop:window.scrollY}function c(){return/(iPhone|iPad|iPod)/gi.test(navigator.platform)}function d(){var a=navigator.userAgent;return/Safari/gi.test(a)&&!/Chrome/gi.test(a)}function e(){var a=navigator.userAgent;return/Chrome/gi.test(a)}function f(){var a=navigator.userAgent;return/Trident/gi.test(a)}var g=document.querySelector(".app");return{appElement:g,isIE:f,isIOS:c,isSafari:d,isChrome:e,makeObject:a,getWindowScrollPosition:b}}(),CDS.History=function(){"use strict";function a(a){var b=document.location.pathname,d="/";"boolean"!=typeof a&&(a=!1),g!==b&&(h||(-1===b.indexOf(g)&&"undefined"!=typeof CDS.Cards[g]?(h=CDS.Cards[g],h.collapse()):"undefined"!=typeof CDS.Cards[b]&&b.split("/").forEach(function(c){""!==c&&(d+=c+"/",d!==b&&"undefined"!=typeof CDS.Cards[d]?CDS.Cards[d].expand(!0):d===b&&(h=CDS.Cards[b],h.expand(a)))}),null!==h&&h.addEventListener("transitionend",c.bind(h),!0),g=b))}function b(b){b.preventDefault(),requestAnimFrame(a)}function c(){h=null,requestAnimFrame(a)}function d(b){window.history.pushState(null,"",b),requestAnimFrame(a)}function e(){window.history.back()}function f(){a(!0),h=null}var g,h=null;return window.addEventListener("popstate",b),{back:e,forth:d,init:f}}(),CDS.Analytics=function(){"use strict";function a(a,b,c){"function"==typeof ga&&ga("send","event",a,b,c)}return{track:a}}(),CDS.Card=function(a){"use strict";this.elements_={root:a,seeMoreLink:a.querySelector(".card__see-more"),container:a.querySelector(".card__container"),title:a.querySelector(".card__title"),logo:a.querySelector(".card__logo"),contentWrapper:a.querySelector(".card__content-wrapper"),collapseButton:a.querySelector(".card__collapse-button")},this.runLoFiAnimations_=!CDS.Util.isChrome(),this.expanded_=!1,this.boxPositionOnExpand_=null,CDS.Util.isIOS()&&this.elements_.root.classList.add("card__no-fixed-header"),this.parts_=Object.keys(this.elements_),this.properties_=["left","top","width","height","scaleX","scaleY","opacity"],this.collapsedPositions_=CDS.Util.makeObject(this.parts_,null),this.expandedPositions_=CDS.Util.makeObject(this.parts_,null),this.diffs_={root:CDS.Util.makeObject(this.properties_,0),seeMoreLink:CDS.Util.makeObject(this.properties_,0),container:CDS.Util.makeObject(this.properties_,0),title:CDS.Util.makeObject(this.properties_,0),logo:CDS.Util.makeObject(this.properties_,0),contentWrapper:CDS.Util.makeObject(this.properties_,0),collapseButton:CDS.Util.makeObject(this.properties_,0)},this.events_={expand:new signals.Signal,collapse:new signals.Signal,transitionend:new signals.Signal},this.onSeeMoreLinkClick_=this.onSeeMoreLinkClick_.bind(this),this.onCollapseButtonClick_=this.onCollapseButtonClick_.bind(this),this.onCollapseTransitionEnd_=this.onCollapseTransitionEnd_.bind(this),this.onExpandTransitionEnd_=this.onExpandTransitionEnd_.bind(this),this.onCardContentScroll_=this.onCardContentScroll_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.disableTabbingToLinks_=this.disableTabbingToLinks_.bind(this),this.elements_.seeMoreLink.addEventListener("click",this.onSeeMoreLinkClick_),this.elements_.collapseButton.addEventListener("click",this.onCollapseButtonClick_),this.elements_.container.addEventListener("scroll",this.onCardContentScroll_),CDS.EventPublisher.add("keyup",this.onKeyUp_),this.disableTabbingToLinks_()},CDS.Card.prototype={onKeyUp_:function(a){27===a.keyCode&&this.expanded_&&this.onCollapseButtonClick_()},onExpandTransitionEnd_:function(a){("undefined"==typeof a||a.target===this.elements_.container)&&(this.elements_.container.classList.add("card__container--scrollable"),this.elements_.root.classList.remove("card--animatable"),this.runLoFiAnimations_&&this.elements_.container.classList.remove("card__container--lofi-animations"),this.resetElementTransformsAndOpacity_(),this.resetElementClip_(),this.elements_.container.removeEventListener("transitionend",this.onExpandTransitionEnd_),this.elements_.container.removeEventListener("webkittransitionend",this.onExpandTransitionEnd_),this.enableTabbingToLinksAndFocusBackButton_(),this.events_.transitionend.dispatch())},onCollapseTransitionEnd_:function(a){("undefined"==typeof a||a.target===this.elements_.contentWrapper)&&(this.expanded_=!1,this.elements_.root.classList.remove("card--expanded"),this.elements_.root.classList.remove("card--collapsing"),this.elements_.root.classList.remove("card--animatable"),this.resetElementTransformsAndOpacity_(),this.resetElementClip_(),this.elements_.contentWrapper.removeEventListener("transitionend",this.onCollapseTransitionEnd_),this.elements_.contentWrapper.removeEventListener("webkittransitionend",this.onCollapseTransitionEnd_),this.disableTabbingToLinks_(),this.events_.transitionend.dispatch())},onCardContentScroll_:function(){var a=50,b=this.elements_.container.scrollTop;0>b||(this.elements_.logo.style.opacity=1-Math.min(1,Math.max(0,b/a)))},onSeeMoreLinkClick_:function(a){CDS.History.forth(this.elements_.seeMoreLink.href),a.preventDefault(),a.stopImmediatePropagation()},onCollapseButtonClick_:function(a){CDS.History.forth("../"),"undefined"!=typeof a&&(a.preventDefault(),a.stopImmediatePropagation())},disableTabbingToLinks_:function(){this.elements_.collapseButton.setAttribute("tabindex",-1);for(var a=this.elements_.contentWrapper.querySelectorAll("a"),b=0;b<a.length;b++)a[b].setAttribute("tabindex",-1)},enableTabbingToLinksAndFocusBackButton_:function(){this.elements_.collapseButton.focus(),this.elements_.collapseButton.setAttribute("tabindex",1);for(var a=this.elements_.contentWrapper.querySelectorAll("a"),b=0;b<a.length;b++)a[b].setAttribute("tabindex",b+2)},applyClipRect_:function(){if(this.expanded_){var a=this.elements_.container.getBoundingClientRect();this.elements_.container.style.clip="rect(0, "+a.width+"px, "+a.height+"px, 0)"}},getRootElement:function(){return this.elements_.root},addEventListener:function(a,b,c){if(!this.events_[a])throw"Unknown event type: "+a;c?this.events_[a].addOnce(b):this.events_[a].add(b)},expand:function(a){if("undefined"==typeof a&&(a=!1),!this.expanded_){this.boxPositionOnExpand_=this.elements_.root.getBoundingClientRect(),this.expanded_=!0,this.collectProperties_(this.collapsedPositions_),this.elements_.root.classList.add("card--expanded");{this.elements_.root.offsetTop}if(this.collectProperties_(this.expandedPositions_),this.calculatePositionDiffs_(),a)return this.setElementTransformsToZeroAndClipToExpanded_(),this.onExpandTransitionEnd_(),void this.events_.expand.dispatch();this.setElementPositionsAndClipToCollapsed_();{this.elements_.root.offsetTop}this.elements_.root.classList.add("card--animatable"),this.setElementTransformsToZeroAndClipToExpanded_(),this.elements_.container.addEventListener("transitionend",this.onExpandTransitionEnd_),this.elements_.container.addEventListener("webkittransitionend",this.onExpandTransitionEnd_),this.events_.expand.dispatch(),CDS.Analytics.track("card","expand",this.elements_.seeMoreLink.href)}},collapse:function(a){"undefined"==typeof a&&(a=!1),this.expanded_&&(this.applyClipRect_(),this.elements_.root.classList.add("card--collapsing"),this.elements_.root.classList.add("card--animatable"),this.runLoFiAnimations_&&this.elements_.container.classList.add("card__container--lofi-animations"),this.elements_.container.scrollTop=0,this.elements_.container.classList.remove("card__container--scrollable"),this.elements_.contentWrapper.addEventListener("transitionend",this.onCollapseTransitionEnd_),this.elements_.contentWrapper.addEventListener("webkittransitionend",this.onCollapseTransitionEnd_),this.setElementPositionsAndClipToCollapsed_(),this.events_.collapse.dispatch(),CDS.Analytics.track("card","collapse",this.elements_.seeMoreLink.href))},resetElementTransformsAndOpacity_:function(){for(var a,b=0;b<this.parts_.length;b++)a=this.parts_[b],this.setElementTransformAndOpacity_(this.elements_[a],"","")},resetElementClip_:function(){this.elements_.container.style.clip=""},setElementPositionsAndClipToCollapsed_:function(){for(var a,b=this.elements_.root.getBoundingClientRect(),c=b.left-this.boxPositionOnExpand_.left,d=b.top-this.boxPositionOnExpand_.top,e=0;e<this.parts_.length;e++)a=this.parts_[e],"container"!==a&&"root"!==a&&(this.diffs_[a].top+=d,this.diffs_[a].left+=c,this.setElementTransformAndOpacity_(this.elements_[a],this.diffs_[a],this.diffs_[a].opacity));if(this.runLoFiAnimations_)return this.diffs_.container.top+=d,this.diffs_.container.left+=c,this.elements_.container.classList.add("card__container--lofi-animations"),void this.setElementTransformAndOpacity_(this.elements_.container,this.diffs_.container);var f=this.collapsedPositions_.container.left+c,g=this.collapsedPositions_.container.right+c,h=this.collapsedPositions_.container.top+d,i=this.collapsedPositions_.container.bottom+d;this.elements_.container.style.clip="rect("+h+"px, "+g+"px, "+i+"px, "+f+"px)"},setElementTransformsToZeroAndClipToExpanded_:function(){for(var a,b=0;b<this.parts_.length;b++)a=this.parts_[b],("container"!==a||this.runLoFiAnimations_)&&"root"!==a&&this.setElementTransformAndOpacity_(this.elements_[a],"translate(0,0) scale(1)",this.expandedPositions_[a].opacity);this.elements_.container.style.clip="rect("+this.expandedPositions_.container.top+"px, "+this.expandedPositions_.container.right+"px, "+this.expandedPositions_.container.bottom+"px, "+this.expandedPositions_.container.left+"px)"},setElementTransformAndOpacity_:function(a,b,c){var d=b;"string"!=typeof b&&(d="translate("+b.left+"px,"+b.top+"px)",a!==this.elements_.contentWrapper&&a!==this.elements_.content&&(d+=" scale("+b.scaleX+", "+b.scaleY+")")),a.style.webkitTransform=d,a.style.transform=d,"undefined"!=typeof c&&(a.style.opacity=c)},collectProperties_:function(a){for(var b,c=0;c<this.parts_.length;c++)b=this.parts_[c],a[b]=this.elements_[b].getBoundingClientRect(),a[b].opacity=parseFloat(window.getComputedStyle(this.elements_[b]).opacity)},calculatePositionDiffs_:function(){for(var a,b=0;b<this.parts_.length;b++)a=this.parts_[b],this.diffs_[a].left=this.collapsedPositions_[a].left-this.expandedPositions_[a].left,this.diffs_[a].top=this.collapsedPositions_[a].top-this.expandedPositions_[a].top,this.diffs_[a].width=this.collapsedPositions_[a].width-this.expandedPositions_[a].width,this.diffs_[a].height=this.collapsedPositions_[a].height-this.expandedPositions_[a].height,this.diffs_[a].scaleX=this.collapsedPositions_[a].width/this.expandedPositions_[a].width,this.diffs_[a].scaleY=this.collapsedPositions_[a].height/this.expandedPositions_[a].height,this.diffs_[a].opacity=1-(this.expandedPositions_[a].opacity-this.collapsedPositions_[a].opacity)}},CDS.Cards=function(){"use strict";for(var a,b=document.querySelectorAll(".card"),c={},d="",e=0;e<b.length;e++)a=b[e],d=a.querySelector(".card__see-more").getAttribute("href"),c[d]=new CDS.Card(a);return c}(),CDS.Toast=function(a){return this.element_=document.createElement("div"),this.elementInner_=document.createElement("div"),this.elementInner_.innerText=a,this.element_.classList.add("toast"),this.elementInner_.classList.add("toast__message"),this.hide=this.hide.bind(this),this.element_.appendChild(this.elementInner_),document.body.appendChild(this.element_),requestAnimFrame(this.hide),this},CDS.Toast.prototype={hide:function(){this.element_.classList.add("toast__hidden"),this.element_.addEventListener("transitionend",this.remove_),this.element_.addEventListener("webkittransitionend",this.remove_)},remove_:function(){this.element_&&document.removeChild(this.element_)}},CDS.Toaster={create:function(a){return new CDS.Toast(a)}},CDS.Masthead=function(){"use strict";function a(){b=CDS.Util.getWindowScrollPosition(),0>b||(e.style.opacity=Math.min(1,Math.max(0,b/c)))}var b,c=30,d=document.querySelector(".masthead"),e=d.querySelector(".masthead__color-block");CDS.EventPublisher.add("scroll",a)}(),CDS.Schedule=function(){"use strict";function a(a){var b,c,d,e=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=H[a];if(I[a])return I[a];for(var h=Object.keys(g),i=0;i<h.length;i++){b=h[i];for(var j=0;j<g[b].length;j++){c=g[b];for(var k=0;k<c.length;k++)d=c[k],d.start<e&&(e=d.start),d.start+d.duration>f&&(f=d.start+d.duration)}}return I[a]={min:e,max:f},I[a]}function b(){w=o.offsetWidth,x=o.offsetHeight,q.width=w*m,q.height=x*m,t.scale(m,m),q.style.width=w+"px",q.style.height=x+"px",z=w-y-u.left-u.right,A=x-u.top-u.bottom,D.x=w-136,D.y=20,E.x=w-66,E.y=20,d()}function c(){t.clearRect(0,0,w,x)}function d(){c();var b=a(B);f(b),g(b),e()}function e(){0===B?r.classList.remove("schedule__day-1--inactive"):r.classList.add("schedule__day-1--inactive"),1===B?s.classList.remove("schedule__day-2--inactive"):s.classList.add("schedule__day-2--inactive")}function f(a){var b,c,d=a.max-a.min,e=Math.floor(z/d),f=A+2*v;t.save(),t.translate(u.left+y+.5,u.top+.5-v),t.fillStyle="#FFF",t.strokeStyle="#FFF",t.globalAlpha=.3,t.textAlign="center",t.textBaseline="top";for(var g=0;d>=g;g++)b=g*e,c=(a.min+g)%12,0===g?c+="AM":0===c&&(c="12PM"),t.beginPath(),t.moveTo(b,0),t.lineTo(b,f),t.stroke(),t.closePath(),t.font="500 16px/1 Roboto",t.fillText(c,b,f+5);t.restore()}function g(a){var b,c,d,e,f,g,h=a.max-a.min,i=H[B],j=10,k=.5*j,l=Object.keys(i),m=Math.floor(z/h),n=(A-j)/(l.length-1);t.save(),t.textAlign="left",t.textBaseline="top",t.translate(u.left,u.top);for(var o=0;o<l.length;o++){b=l[o],f=Math.floor(o*n),t.fillStyle=F,t.globalAlpha=.56,t.font="300 16px/1 Roboto",t.fillText(b,0,f-k),t.fillStyle=G,t.globalAlpha=1,t.save(),t.translate(y,0);for(var p=0;p<i[b].length;p++){c=i[b];for(var q=0;q<c.length;q++)d=c[q],e=Math.floor((d.start-a.min)*m),g=Math.round(d.duration*m),t.fillRect(e,f,g,j)}t.restore()}t.restore()}function h(a){a.preventDefault(),B=0,d()}function i(a){a.preventDefault(),B=1,d()}function j(){p.classList.add("schedule__overview-container--hidden")}function k(){p.classList.remove("schedule__overview-container--hidden")}function l(){d()}var m=window.devicePixelRatio,n=CDS.Cards["/events/2015/summit/schedule/"],o=n.getRootElement(),p=o.querySelector(".schedule__overview-container"),q=o.querySelector("canvas"),r=o.querySelector(".schedule__day-1"),s=o.querySelector(".schedule__day-2"),t=q.getContext("2d"),u={top:82,bottom:74,left:16,right:54},v=10,w=0,x=0,y=165,z=0,A=0,B=0,C=new Date,D={x:0,y:0,width:50,height:26},E={x:0,y:0,width:50,height:26},F="#FFF",G="#4A90E2",H=[{Breakfast:[{start:8,duration:1}],Keynote:[{start:9,duration:.5},{start:17,duration:.25}],Sessions:[{start:9.5,duration:1.5},{start:11.5,duration:1.5},{start:14.5,duration:1.5},{start:16.5,duration:.5}],Break:[{start:11,duration:.5},{start:13,duration:1.5},{start:16,duration:.5}],"After Party":[{start:17.25,duration:4.75}]},{Breakfast:[{start:8,duration:1}],Sessions:[{start:9,duration:1.5},{start:11.75,duration:.75},{start:13.75,duration:1.5},{start:16,duration:1}],"Breakout Discussion":[{start:10.5,duration:1.25}],Break:[{start:12.5,duration:1.25},{start:15.25,duration:.75}]}],I={};10===C.getMonth()&&20===C.getDate()&&2014===C.getFullYear()&&(B=1),function(){r.addEventListener("click",h),s.addEventListener("click",i),n.addEventListener("expand",j),n.addEventListener("collapse",k),b(),c()}(),CDS.EventPublisher.add("resize",b),CDS.EventPublisher.add("load",l)}(),CDS.History.init(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/devsummit/sw.js",{scope:"/devsummit/"}).then(function(a){var b="A new version of this page is available. Please force-refresh.";return a.waiting?void CDS.Toaster.create(b):void(a.onupdatefound=function(){console.log("A new version has been found... Installing..."),a.installing.onstatechange=function(){"installed"===this.state?CDS.Toaster.create(b):console.log("New Service Worker state: ",this.state)}})},function(a){console.log(a)});
//# sourceMappingURL=cds.min.js.map